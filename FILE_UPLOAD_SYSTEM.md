# üì§ –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∑–∞–≥—Ä—É–∂–∞—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ) –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (PDF, Word, Excel, txt) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ —É—Ä–æ–∫–∞.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤

**–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã:**
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `image/*` (jpg, png, gif, webp –∏ –¥—Ä.)
- –í–∏–¥–µ–æ: `video/*` (mp4, avi, mov, wmv, flv, mkv, webm)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–µ–æ:** –¥–æ 2 –ì–ë

**–î–æ–∫—É–º–µ–Ω—Ç—ã:**
- PDF: `.pdf`
- Word: `.doc`, `.docx`
- Excel: `.xls`, `.xlsx`
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ: `.txt`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ —Ä–∞–∑–º–µ—Ä—É

### –†–∞–∑–¥–µ–ª—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

- ‚úÖ **–¢–µ–æ—Ä–∏—è** (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚è≥ **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è** (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚è≥ **–ß–µ–ª–ª–µ–Ω–¥–∂** (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚è≥ **–¢–µ—Å—Ç** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend API

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
```
POST /api/admin/upload-file
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (FormData):**
- `file` - —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
- `lesson_id` - ID —É—Ä–æ–∫–∞
- `section` - —Ä–∞–∑–¥–µ–ª (theory, exercises, challenge, quiz)
- `file_type` - —Ç–∏–ø —Ñ–∞–π–ª–∞ (media, document)

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω",
  "file_id": "uuid",
  "filename": "example.pdf",
  "file_size": 1024000,
  "file_type": "document"
}
```

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
```
GET /api/admin/files?lesson_id={id}&section={section}&file_type={type}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "files": [
    {
      "id": "uuid",
      "lesson_id": "lesson_uuid",
      "section": "theory",
      "file_type": "media",
      "original_name": "image.jpg",
      "file_size": 512000,
      "mime_type": "image/jpeg",
      "extension": "jpg",
      "uploaded_by": "admin_id",
      "uploaded_at": "2025-11-11T00:00:00",
      "file_path": "uploads/learning_v2/uuid_image.jpg"
    }
  ],
  "total": 1
}
```

#### 3. –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
```
DELETE /api/admin/files/{file_id}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω",
  "file_id": "uuid"
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ö–æ–ª–ª–µ–∫—Ü–∏—è: `files`**

```javascript
{
  id: "uuid",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ñ–∞–π–ª–∞
  lesson_id: "lesson_uuid",      // ID —É—Ä–æ–∫–∞
  section: "theory",             // –†–∞–∑–¥–µ–ª —É—Ä–æ–∫–∞
  file_type: "media",            // –¢–∏–ø: media –∏–ª–∏ document
  original_name: "image.jpg",    // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
  stored_name: "uuid_image.jpg", // –ò–º—è —Ñ–∞–π–ª–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
  file_path: "uploads/...",      // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
  file_size: 512000,             // –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö
  mime_type: "image/jpeg",       // MIME-—Ç–∏–ø
  extension: "jpg",              // –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
  uploaded_by: "admin_id",       // ID –∑–∞–≥—Ä—É–∑–∏–≤—à–µ–≥–æ
  uploaded_at: ISODate("...")    // –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `lesson_id`
- `section`
- `file_type`
- `uploaded_by`
- `uploaded_at`

### Frontend

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**LessonEditModal.jsx:**
- `loadFiles(section)` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤
- `handleFileUpload(event, section, fileType)` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- `handleFileDelete(fileId, section)` - —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

#### –°–æ—Å—Ç–æ—è–Ω–∏—è

```javascript
const [theoryMediaFiles, setTheoryMediaFiles] = useState([]);
const [theoryDocuments, setTheoryDocuments] = useState([]);
const [uploadingFile, setUploadingFile] = useState(false);
```

#### UI —ç–ª–µ–º–µ–Ω—Ç—ã

**–ö–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏:**
- üîµ **"–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞"** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–æ—Ä–∏–∏ –∏–∑ .txt/.md
- üü£ **"–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã"** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –≤–∏–¥–µ–æ
- üü¢ **"–î–æ–∫—É–º–µ–Ω—Ç—ã"** - –∑–∞–≥—Ä—É–∑–∫–∞ PDF, Word, Excel, txt

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:**
- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã: —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –±–ª–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π Upload
- –î–æ–∫—É–º–µ–Ω—Ç—ã: –∑–µ–ª–µ–Ω—ã–π –±–ª–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π FileText
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞: –∏–º—è, —Ä–∞–∑–º–µ—Ä, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ, –∫–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. **–û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞**
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –ù–∞–∂–∞—Ç—å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –Ω–∞–ø—Ä–æ—Ç–∏–≤ —É—Ä–æ–∫–∞

2. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã**
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–¢–µ–æ—Ä–∏—è"
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã"
   - –í—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤
   - –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

3. **–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã**
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–∫—É–º–µ–Ω—Ç—ã"
   - –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã
   - –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏

4. **–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª**
   - –ù–∞–π—Ç–∏ —Ñ–∞–π–ª –≤ —Å–ø–∏—Å–∫–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö
   - –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –∫–æ—Ä–∑–∏–Ω—ã (üóëÔ∏è)
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ

5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Ä–æ–∫**
   - –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Ä–æ–∫" –≤–Ω–∏–∑—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –≤–∏–¥–µ–æ (–º–∞–∫—Å. 2 –ì–ë)
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (UUID)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ñ–∞–π–ª + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/
  uploads/
    learning_v2/
      {uuid}_{original_name}
```

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ **–¢–µ–æ—Ä–∏—è**
2. ‚è≥ –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–∞ **–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è**
3. ‚è≥ –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–∞ **–ß–µ–ª–ª–µ–Ω–¥–∂**
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ **–¢–µ—Å—Ç**
5. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
6. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –≥–∞–ª–µ—Ä–µ—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
7. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ–ø–ª–µ–µ—Ä

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **Backend endpoints:** 3 (–∑–∞–≥—Ä—É–∑–∫–∞, —Å–ø–∏—Å–æ–∫, —É–¥–∞–ª–µ–Ω–∏–µ)
- **Frontend —Ñ—É–Ω–∫—Ü–∏–π:** 3 (load, upload, delete)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:** 10+ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
- **–†–∞–∑–¥–µ–ª–æ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π:** 1/4 (–¢–µ–æ—Ä–∏—è –≥–æ—Ç–æ–≤–∞)

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –í–∏–¥–µ–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 2 –ì–ë (–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –≤ `backend/server.py`)
- –§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è S3/CDN)
- –ù–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤)
- –§–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É—Ä–æ–∫–∞ (–∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ backend
- Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –≤ –ú–ë

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-11  
**–ê–≤—Ç–æ—Ä:** NumerOM Team

