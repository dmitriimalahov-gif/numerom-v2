# üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö NumerOM Learning System V2

## üìä –û–±–∑–æ—Ä

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MongoDB `learning_v2` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–±—É—á–µ–Ω–∏—è, –≤–∫–ª—é—á–∞—è —É—Ä–æ–∫–∏, –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É.

---

## üìö –ö–æ–ª–ª–µ–∫—Ü–∏–∏

### 1. `lessons_v2` - –£—Ä–æ–∫–∏

–•—Ä–∞–Ω–∏—Ç –≤—Å–µ —É—Ä–æ–∫–∏ —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (—Ç–µ–æ—Ä–∏—è, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, —á–µ–ª–ª–µ–Ω–¥–∂–∏, —Ç–µ—Å—Ç—ã).

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —É—Ä–æ–∫–∞
  "title": "–£—Ä–æ–∫ 1: –°—É—Ä—å—è",              // –ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞",        // –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  "order": 1,                             // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
  "level": 1,                             // –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  "is_active": true,                      // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ —É—Ä–æ–∫
  "created_at": ISODate("2025-11-10"),   // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  "updated_at": ISODate("2025-11-10"),   // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  "created_by": "admin_user_id",         // –ö—Ç–æ —Å–æ–∑–¥–∞–ª
  "updated_by": "admin_user_id",         // –ö—Ç–æ –æ–±–Ω–æ–≤–∏–ª
  
  // –¢–µ–æ—Ä–∏—è
  "theory": [
    {
      "id": "theory_uuid",
      "title": "–í–≤–µ–¥–µ–Ω–∏–µ",
      "content": "–¢–µ–∫—Å—Ç —Ç–µ–æ—Ä–∏–∏...",
      "order": 0
    }
  ],
  
  // –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
  "exercises": [
    {
      "id": "exercise_uuid",
      "title": "–†–∞—Å—á—ë—Ç –ß–∏—Å–ª–∞ –î—É—à–∏",
      "description": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
      "instructions": "–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
      "expected_outcome": "–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
      "type": "practice",  // practice, analysis, reflection
      "order": 0
    }
  ],
  
  // –ß–µ–ª–ª–µ–Ω–¥–∂
  "challenge": {
    "id": "challenge_uuid",
    "title": "7 –¥–Ω–µ–π —Å–≤–µ—Ç–∞",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ —á–µ–ª–ª–µ–Ω–¥–∂–∞",
    "duration_days": 7,
    "daily_tasks": [
      {
        "day": 1,
        "title": "–î–µ–Ω—å –ø–µ—Ä–≤—ã–π",
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ –¥–Ω—è",
        "tasks": ["–ó–∞–¥–∞—á–∞ 1", "–ó–∞–¥–∞—á–∞ 2"],
        "completed": false
      }
    ],
    "start_date": null,
    "end_date": null
  },
  
  // –¢–µ—Å—Ç
  "quiz": {
    "id": "quiz_uuid",
    "title": "–¢–µ—Å—Ç: –°—É—Ä—å—è",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞",
    "passing_score": 70,
    "time_limit_minutes": 15,
    "questions": [
      {
        "id": "q1",
        "question": "–í–æ–ø—Ä–æ—Å?",
        "type": "multiple_choice",
        "options": ["A", "B", "C", "D"],
        "correct_answer": "A",
        "explanation": "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ",
        "points": 10
      }
    ]
  }
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `is_active`
- `order`
- `created_at` (desc)
- `updated_at` (desc)

---

### 2. `exercise_responses` - –û—Ç–≤–µ—Ç—ã –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

–•—Ä–∞–Ω–∏—Ç –≤—Å–µ –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è.

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ—Ç–≤–µ—Ç–∞
  "user_id": "student_user_id",           // ID —Å—Ç—É–¥–µ–Ω—Ç–∞
  "lesson_id": "lesson_uuid",             // ID —É—Ä–æ–∫–∞
  "exercise_id": "exercise_uuid",         // ID —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
  "response_text": "–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞...",    // –û—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞
  "submitted_at": ISODate("2025-11-10"), // –î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
  "reviewed": false,                      // –ü—Ä–æ–≤–µ—Ä–µ–Ω –ª–∏ –æ—Ç–≤–µ—Ç
  "admin_comment": null,                  // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  "reviewed_at": null,                    // –î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
  "reviewed_by": null                     // –ö—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏–ª
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `user_id, lesson_id, exercise_id` (unique composite)
- `user_id`
- `lesson_id`
- `exercise_id`
- `submitted_at` (desc)
- `reviewed`
- `reviewed_by`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–¥–∏–Ω —Å—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç –Ω–∞ –æ–¥–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π

---

### 3. `lesson_progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º

–•—Ä–∞–Ω–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —É—Ä–æ–∫—É.

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  "user_id": "student_user_id",           // ID —Å—Ç—É–¥–µ–Ω—Ç–∞
  "lesson_id": "lesson_uuid",             // ID —É—Ä–æ–∫–∞
  "exercises_completed": 5,               // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
  "theory_completed": false,              // –¢–µ–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞
  "challenge_completed": false,           // –ß–µ–ª–ª–µ–Ω–¥–∂ –∑–∞–≤–µ—Ä—à–µ–Ω
  "quiz_completed": false,                // –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω
  "quiz_passed": false,                   // –¢–µ—Å—Ç —Å–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ
  "completion_percentage": 25.0,          // –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (0-100)
  "is_completed": false,                  // –£—Ä–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω
  "started_at": ISODate("2025-11-10"),   // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
  "last_activity_at": ISODate("2025-11-10"), // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  "completed_at": null,                   // –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  "time_spent_minutes": 45                // –í—Ä–µ–º—è –Ω–∞ —É—Ä–æ–∫ (–º–∏–Ω—É—Ç—ã)
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `user_id, lesson_id` (unique composite)
- `user_id`
- `lesson_id`
- `is_completed`
- `completion_percentage` (desc)
- `last_activity_at` (desc)
- `started_at` (desc)
- `completed_at` (desc)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ —É—Ä–æ–∫–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

---

### 4. `quiz_attempts` - –ü–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

–•—Ä–∞–Ω–∏—Ç –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏.

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ø—ã—Ç–∫–∏
  "user_id": "student_user_id",           // ID —Å—Ç—É–¥–µ–Ω—Ç–∞
  "lesson_id": "lesson_uuid",             // ID —É—Ä–æ–∫–∞
  "quiz_id": "quiz_uuid",                 // ID —Ç–µ—Å—Ç–∞
  "answers": [                            // –û—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
    {
      "question_id": "q1",
      "selected_answer": "A",
      "is_correct": true,
      "points_earned": 10
    }
  ],
  "score": 85,                            // –ù–∞–±—Ä–∞–Ω–Ω—ã–µ –±–∞–ª–ª—ã (%)
  "passed": true,                         // –¢–µ—Å—Ç —Å–¥–∞–Ω
  "started_at": ISODate("2025-11-10"),   // –ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∞
  "completed_at": ISODate("2025-11-10"), // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
  "time_spent_minutes": 12                // –í—Ä–µ–º—è –Ω–∞ —Ç–µ—Å—Ç
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `user_id, lesson_id`
- `user_id`
- `lesson_id`
- `quiz_id`
- `passed`
- `score` (desc)
- `started_at` (desc)
- `completed_at` (desc)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫
- –ö–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è

---

### 5. `challenge_progress` - –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —á–µ–ª–ª–µ–Ω–¥–∂–∞–º

–•—Ä–∞–Ω–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ –º–Ω–æ–≥–æ–¥–Ω–µ–≤–Ω—ã–º —á–µ–ª–ª–µ–Ω–¥–∂–∞–º.

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  "user_id": "student_user_id",           // ID —Å—Ç—É–¥–µ–Ω—Ç–∞
  "lesson_id": "lesson_uuid",             // ID —É—Ä–æ–∫–∞
  "challenge_id": "challenge_uuid",       // ID —á–µ–ª–ª–µ–Ω–¥–∂–∞
  "current_day": 3,                       // –¢–µ–∫—É—â–∏–π –¥–µ–Ω—å
  "completed_days": [1, 2, 3],           // –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –¥–Ω–∏
  "daily_notes": [                        // –ó–∞–º–µ—Ç–∫–∏ –ø–æ –¥–Ω—è–º
    {
      "day": 1,
      "note": "–ó–∞–º–µ—Ç–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞",
      "completed_at": ISODate("2025-11-10")
    }
  ],
  "is_completed": false,                  // –ß–µ–ª–ª–µ–Ω–¥–∂ –∑–∞–≤–µ—Ä—à–µ–Ω
  "started_at": ISODate("2025-11-10"),   // –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
  "completed_at": null                    // –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `user_id, lesson_id, challenge_id` (unique composite)
- `user_id`
- `lesson_id`
- `challenge_id`
- `is_completed`
- `current_day`
- `started_at` (desc)
- `completed_at` (desc)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –¥–Ω—é
- –°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–º–µ—Ç–∫–∏ –∫ –∫–∞–∂–¥–æ–º—É –¥–Ω—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å

---

### 6. `student_analytics` - –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

–•—Ä–∞–Ω–∏—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É —Å—Ç—É–¥–µ–Ω—Ç—É.

```javascript
{
  "_id": ObjectId("..."),
  "id": "uuid-string",                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  "user_id": "student_user_id",           // ID —Å—Ç—É–¥–µ–Ω—Ç–∞ (unique)
  "total_lessons_started": 10,            // –ù–∞—á–∞—Ç–æ —É—Ä–æ–∫–æ–≤
  "total_lessons_completed": 5,           // –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Ä–æ–∫–æ–≤
  "total_exercises_completed": 45,        // –í—ã–ø–æ–ª–Ω–µ–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
  "total_challenges_completed": 3,        // –ó–∞–≤–µ—Ä—à–µ–Ω–æ —á–µ–ª–ª–µ–Ω–¥–∂–µ–π
  "total_quizzes_passed": 4,              // –°–¥–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤
  "average_quiz_score": 82.5,             // –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –ø–æ —Ç–µ—Å—Ç–∞–º
  "total_time_spent_minutes": 450,        // –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è
  "last_activity_at": ISODate("2025-11-10"), // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  "streak_days": 7,                       // –î–Ω–µ–π –ø–æ–¥—Ä—è–¥
  "achievements": ["first_lesson", "week_streak"], // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  "level": 2,                             // –£—Ä–æ–≤–µ–Ω—å —Å—Ç—É–¥–µ–Ω—Ç–∞
  "experience_points": 1250               // –û—á–∫–∏ –æ–ø—ã—Ç–∞
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `id` (unique)
- `user_id` (unique)
- `total_lessons_completed` (desc)
- `total_exercises_completed` (desc)
- `average_quiz_score` (desc)
- `last_activity_at` (desc)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–µ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–Ω–µ–π

---

### 7. `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö —Å–∏—Å—Ç–µ–º—ã.

```javascript
{
  "_id": ObjectId("..."),
  "username": "student123",               // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (unique)
  "email": "student@example.com",         // Email (unique, optional)
  "password_hash": "hashed_password",     // –•—ç—à –ø–∞—Ä–æ–ª—è
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",            // –ü–æ–ª–Ω–æ–µ –∏–º—è
  "is_admin": false,                      // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  "is_super_admin": false,                // –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  "is_active": true,                      // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–∫–∫–∞—É–Ω—Ç
  "created_at": ISODate("2025-11-10"),   // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  "last_login_at": ISODate("2025-11-10"), // –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
  "profile": {                            // –ü—Ä–æ—Ñ–∏–ª—å
    "avatar_url": null,
    "bio": "–û —Å–µ–±–µ",
    "birth_date": ISODate("1990-01-01"),
    "phone": "+7 999 999 99 99"
  }
}
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `username` (unique)
- `email` (unique, sparse)
- `is_admin`
- `is_super_admin`
- `created_at` (desc)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–∞—Ä–æ–ª–∏ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt
- Email –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (sparse index)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–æ–ª–µ–π (—Å—Ç—É–¥–µ–Ω—Ç, –∞–¥–º–∏–Ω, —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω)

---

## üîÑ –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏

```
users (user_id)
  ‚îú‚îÄ‚Üí exercise_responses (user_id)
  ‚îú‚îÄ‚Üí lesson_progress (user_id)
  ‚îú‚îÄ‚Üí quiz_attempts (user_id)
  ‚îú‚îÄ‚Üí challenge_progress (user_id)
  ‚îî‚îÄ‚Üí student_analytics (user_id)

lessons_v2 (lesson_id)
  ‚îú‚îÄ‚Üí exercise_responses (lesson_id)
  ‚îú‚îÄ‚Üí lesson_progress (lesson_id)
  ‚îú‚îÄ‚Üí quiz_attempts (lesson_id)
  ‚îî‚îÄ‚Üí challenge_progress (lesson_id)
```

---

## üìà –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —É—Ä–æ–∫–∞

```javascript
db.exercise_responses.find({
  user_id: "student_id",
  lesson_id: "lesson_id"
})
```

### –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ –≤—Å–µ–º —É—Ä–æ–∫–∞–º

```javascript
db.lesson_progress.find({
  user_id: "student_id"
}).sort({ last_activity_at: -1 })
```

### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —Å—Ä–µ–¥–Ω–µ–º—É –±–∞–ª–ª—É

```javascript
db.student_analytics.find({})
  .sort({ average_quiz_score: -1 })
  .limit(10)
```

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–µ–ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

```javascript
db.exercise_responses.find({
  reviewed: false
}).sort({ submitted_at: -1 })
```

### –ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π

```javascript
db.lesson_progress.find({
  user_id: "student_id",
  last_activity_at: {
    $gte: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
  }
})
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT —Ç–æ–∫–µ–Ω—ã
2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –∫–∞–∂–¥—ã–π endpoint
3. **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –°—Ç—É–¥–µ–Ω—Ç—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
4. **–•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: bcrypt
5. **–ò–Ω–¥–µ–∫—Å—ã**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ MongoDB —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `init-mongo.js`.

–î–ª—è —Ä—É—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MongoDB
docker exec -it numerom-v2-mongodb mongosh -u admin -p password123

# –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
use learning_v2
load('/docker-entrypoint-initdb.d/init-mongo.js')
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–π

```javascript
db.stats()
db.exercise_responses.stats()
db.lesson_progress.stats()
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã

```javascript
db.exercise_responses.getIndexes()
db.lesson_progress.getIndexes()
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞

```javascript
db.exercise_responses.find({ user_id: "..." }).explain("executionStats")
```

---

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
docker exec numerom-v2-mongodb mongodump \
  --db learning_v2 \
  --out /backup \
  --username admin \
  --password password123
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
docker exec numerom-v2-mongodb mongorestore \
  --db learning_v2 \
  /backup/learning_v2 \
  --username admin \
  --password password123
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –¥–∞—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ UTC
- –í—Å–µ ID –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é UUID v4
- –ò–Ω–¥–µ–∫—Å—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MongoDB 6.0+

